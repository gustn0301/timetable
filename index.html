<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>나의 주간 시간표</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-start-color: #f0f4f8;
            --bg-end-color: #e6e9f0;
            --main-color: #2c3e50;
            --accent-color: #4299e1;
        }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            color: var(--main-color);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            transition: background 1s ease;
            background: linear-gradient(to bottom right, var(--bg-start-color), var(--bg-end-color));
            position: relative;
        }

        .container {
            position: relative;
            z-index: 2;
            display: flex;
            flex-direction: column;
            width: 95%;
            max-width: 1400px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            padding: 20px;
        }

        @media (max-width: 768px) {
            .container {
                flex-direction: column;
                width: 100%;
            }
        }
        
        /* 상단 섹션을 감싸는 새로운 div 추가 */
        .top-sections {
            display: flex;
            width: 100%;
        }

        @media (max-width: 768px) {
            .top-sections {
                flex-direction: column;
            }
        }

        /* 왼쪽 섹션: 현재 시간 및 수업 정보 (flex: 1로 더 작게) */
        .left-section {
            flex: 1;
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            background: white;
            color: black;
            transition: background 1s ease;
        }

        /* 오른쪽 섹션: 시간표 (flex: 2로 더 넓게) */
        .right-section {
            flex: 2;
            padding: 20px;
        }

        .left-section h2 {
            font-size: 2em;
            margin-bottom: 10px;
            opacity: 0.8;
        }

        .left-section h1 {
            font-size: 6em;
            font-weight: 700;
            margin: 0;
            letter-spacing: -2px;
        }
        
        #current-date {
            color: #808080;
        }

        #current-time {
            color: #0a1c3d;
        }
        
        .current-class-info {
            margin-top: 30px;
            font-size: 1.3em;
            background-color: rgba(0, 0, 0, 0.05);
            padding: 25px;
            border-radius: 10px;
            width: 100%;
            box-sizing: border-box;
            line-height: 1.6;
        }

        .current-class-info p {
            margin: 5px 0;
        }
        
        #class-name {
            font-size: 1.5em;
            font-weight: bold;
            display: block;
        }
        
        .right-section h2 {
            text-align: center;
            font-size: 2em;
            color: var(--main-color);
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            font-size: 0.8em; /* 글씨 크기 전체적으로 줄임 */
            text-align: center;
            table-layout: fixed;
        }

        th, td {
            border: 1px solid #e0e6ed;
            padding: 6px 3px; /* 좌우 여백 조정 */
            white-space: normal;
            word-break: normal;
        }
        
        td div {
            font-size: 0.75em; /* 글씨 크기 전체적으로 줄임 */
            color: #555;
            margin-top: 5px;
        }

        th {
            background-color: var(--main-color);
            color: white;
            font-weight: bold;
        }

        tr:nth-child(even) {
            background-color: #f8f9fa;
        }
        
        td.highlight {
            background-color: #f7d794 !important;
            font-weight: bold;
            color: #a05a00;
        }

        .announcement-section {
            margin-top: 30px;
            width: 100%; /* 전체 폭을 차지하도록 변경 */
        }

        .announcement-section h3 {
            margin-bottom: 10px;
            font-size: 1.2em;
            color: var(--main-color);
        }
        
        #announcement-display {
            margin-top: 15px;
            background-color: white; /* 배경색을 흰색으로 변경 */
            padding: 15px;
            border-radius: 8px;
            white-space: normal;
            word-break: break-all;
            min-height: 50px;
            border: 1px dashed #ccc;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- 상단 섹션: 현재 시간/정보(왼쪽)와 시간표(오른쪽) -->
        <div class="top-sections">
            <!-- 왼쪽 섹션: 현재 시간 및 수업 정보 -->
            <div class="left-section">
                <h2 id="current-date"></h2>
                <h1 id="current-time"></h1>
                <div class="current-class-info">
                    <span id="class-name"></span>
                    <p id="teacher-name-p">선생님: <span id="teacher-name"></span></p>
                    <p id="location-p">장소: <span id="location"></span></p>
                </div>
                <p id="special-message" style="margin-top: 20px; font-size: 1.1em; font-weight: bold; text-shadow: 1px 1px 2px rgba(0,0,0,0.2);"></p>
            </div>
            
            <!-- 오른쪽 섹션: 전체 시간표 -->
            <div class="right-section">
                <h2>주간 시간표</h2>
                <div style="overflow-x: auto;">
                    <table id="timetable">
                        <thead>
                            <tr>
                                <th>교시</th>
                                <th>월</th>
                                <th>화</th>
                                <th>수</th>
                                <th>목</th>
                                <th>금</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- JavaScript가 여기에 시간표 내용을 생성합니다 -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- 공지사항 섹션 (아래에 길게 위치) -->
        <div class="announcement-section">
            <h3>📢 공지사항</h3>
            <div id="announcement-display"></div>
        </div>
    </div>

    <script>
        // 이 부분에 본인의 시간표 데이터를 입력하세요.
        // name: 과목 이름, teacher: 선생님 이름, location: 장소
        const timetableData = {
            '월': [
                { name: '통합과학2', teacher: '이현우T', location: '1학년 3반 교실' },
                { name: '인공지능기초', teacher: '김용상T, 하미경T', location: 'AI 심포지움' },
                { name: '통합사회2', teacher: '김형석T', location: '1학년 7반 교실' },
                { name: '공강 모의고사', teacher: '이지연T', location: '1학년 4반 교실' },
                { name: '공통수학2', teacher: '유지현T', location: '1학년 5반 교실' },
                { name: '공통국어2', teacher: '이정원T', location: '1학년 1반 교실' },
                { name: '공통영어2', teacher: '이지연T', location: '1학년 4반 교실' }
            ],
            '화': [
                { name: '종교', teacher: '김동해 신부님', location: 'J301' },
                { name: '통합과학2', teacher: '홍소영T', location: '3학년 6반 교실' },
                { name: '스포츠과학', teacher: '은현진T', location: '마리아홀' },
                { name: '공통영어2', teacher: '김영미T', location: '1학년 6반 교실' },
                { name: '공통국어2', teacher: '전민지T', location: 'AI 인텔리랩' },
                { name: '한국사2', teacher: '한우진T', location: '사회교과실' },
                { name: '공통수학2', teacher: '유지현T', location: '1학년 5반 교실' }
            ],
            '수': [
                { name: '공통수학2', teacher: '유지현T', location: '1학년 5반 교실' },
                { name: '통합과학2', teacher: '이현우T', location: '1학년 3반 교실' },
                { name: '한국사2', teacher: '한우진 T', location: '사회교과실' },
                { name: '공통국어2', teacher: '이정원T', location: '1학년 1반 교실' },
                { name: '과학탐구실험2', teacher: '김보련T', location: '3층 화학실험실' },
                { name: '인공지능기초', teacher: '김용상T, 하미경T', location: 'AI 심포지움' },
                { name: '통합사회2', teacher: '김형석T', location: '1학년 7반 교실' }
            ],
            '목': [
                { name: '통합과학2', teacher: '이윤숙T', location: '3층 물리학 실험실' },
                { name: '종교', teacher: '김동해 신부님', location: 'J301' },
                { name: '진로', teacher: '한상무T', location: '진로실' },
                { name: '한국사2', teacher: '정기엽T', location: '3학년 3반 교실' },
                { name: '통합사회2', teacher: '김기모T', location: '2학년 7반 교실(3층)' },
                { name: '공통영어2', teacher: '이지연T', location: '1학년 4반 교실' },
                { name: '통합사회2', teacher: '서정석T', location: '2학년 6반 교실(3층)' }
            ],
            '금': [
                { name: '인공지능기초', teacher: '김용상T, 하미경T', location: 'AI 심포지움' },
                { name: '공통수학2', teacher: '유지현T', location: '1학년 5반 교실' },
                { name: '공통영어2', teacher: '김영미T', location: '1학년 6반 교실' },
                { name: '공통국어2', teacher: '전민지T', location: 'AI 인텔리랩' },
                { name: '창체', teacher: null, location: null },
                { name: '창체', teacher: null, location: null },
                { name: '창체', teacher: null, location: null }
            ]
        };

        const morningMessages = [
            '활기찬 아침, 오늘도 힘차게 시작해봐요!',
            '좋은 생각과 함께 멋진 하루를 시작하세요.',
            '오늘 하루도 긍정적인 에너지가 가득하길 바랍니다!',
            '새로운 시작을 응원합니다. 좋은 아침!',
            '오늘도 새로운 배움과 즐거움으로 채워나가세요.'
        ];
        
        // 교시별 시작 및 종료 시간 설정
        const classTimes = [
            { start: '06:30', end: '07:49', name: '아침 시간', special: true, type: 'morning_message' },
            { start: '07:50', end: '08:29', name: '아침 활동', special: true, type: 'morning_activity_message' },
            { start: '08:30', end: '08:39', name: '쉬는 시간', special: true, message: '1교시 수업을 준비하세요.' },
            { start: '08:40', end: '09:29', name: '1교시', special: false, period: 1 },
            { start: '09:30', end: '09:39', name: '쉬는 시간', special: true, message: '2교시 수업을 준비하세요.' },
            { start: '09:40', end: '10:29', name: '2교시', special: false, period: 2 },
            { start: '10:30', end: '10:39', name: '쉬는 시간', special: true, message: '3교시 수업을 준비하세요.' },
            { start: '10:40', end: '11:29', name: '3교시', special: false, period: 3 },
            { start: '11:30', end: '11:39', name: '쉬는 시간', special: true, message: '4교시 수업을 준비하세요.' },
            { start: '11:40', end: '12:29', name: '4교시', special: false, period: 4 },
            { start: '12:30', end: '13:09', name: '점심시간', special: true, message: '맛있는 점심, 행복한 시간 보내세요!' },
            { start: '13:10', end: '13:29', name: '5교시 준비', special: true, message: '5교시 수업을 준비하세요.' },
            { start: '13:30', end: '14:19', name: '5교시', special: false, period: 5 },
            { start: '14:20', end: '14:29', name: '쉬는 시간', special: true, message: '6교시 수업을 준비하세요.' },
            { start: '14:30', end: '15:19', name: '6교시', special: false, period: 6 },
            { start: '15:20', end: '15:39', name: '청소시간', special: true, message: '7교시 수업을 준비하세요.' },
            { start: '15:40', end: '16:29', name: '7교시', special: false, period: 7 },
            { start: '16:30', end: '16:39', name: '자습(방과후) 준비', special: true, message: '자습(방과후) 준비 시간입니다.' },
            { start: '16:40', end: '17:29', name: '자습(방과후)', special: true, message: '자율적으로 학습하는 시간입니다.' },
            { start: '17:30', end: '18:44', name: '저녁시간', special: true, message: '오늘 하루도 수고 많았어요. 든든하게 저녁 먹고 힘내세요!' },
            { start: '18:45', end: '18:59', name: '자습 준비', special: true, message: '자습을 준비하세요.' },
            { start: '19:00', end: '20:19', name: '자습시간', special: true, message: '자기주도 학습 시간입니다.' },
            { start: '20:20', end: '20:39', name: '쉬는 시간', special: true, message: '잠시 쉬면서 다음 자습 시간을 준비하세요.' },
            { start: '20:40', end: '21:49', name: '자습시간', special: true, message: '자기주도 학습 시간입니다.' },
            { start: '21:50', end: '21:59', name: '쉬는 시간', special: true, message: '잠시 쉬면서 다음 자습 시간을 준비하세요.' },
            { start: '22:00', end: '22:59', name: '자습시간', special: true, message: '자기주도 학습 시간입니다.' },
            { start: '23:00', end: '24:00', name: '수고하셨습니다.', special: true, message: '오늘 하루 정말 수고 많으셨습니다. 편안한 밤 되세요!' }
        ];

        // 이 부분에 공지사항 내용을 직접 입력하고, 여러 줄로 작성할 수 있습니다.
        const announcementText = `9/12(금)
자감 - 유지현T
마타수학(집합) 풀기 - 이번주 토요일 까지
수학 심화탐구 발표 PPT 제출 - 이번주 일요일 까지
인공기 수행은 나도 모름 ㅋ
        
2학기 중간고사 D-12 

피드백은 yhs1302asdf@pess.cnehs.kr로 구글챗
`;

        // 교시 번호에 맞는 시간 범위를 찾아 반환하는 함수
        function getClassTimeRange(period) {
            const timeInfo = classTimes.find(t => !t.special && t.period === period);
            if (timeInfo) {
                // 끝나는 시간에 1분을 더해서 표시하도록 수정합니다.
                const [endHour, endMinute] = timeInfo.end.split(':').map(Number);
                let newEndHour = endHour;
                let newEndMinute = endMinute + 1;

                if (newEndMinute === 60) {
                    newEndMinute = 0;
                    newEndHour = newEndHour + 1;
                }

                const formattedEndHour = String(newEndHour).padStart(2, '0');
                const formattedEndMinute = String(newEndMinute).padStart(2, '0');
                
                return `${timeInfo.start}~${formattedEndHour}:${formattedEndMinute}`;
            }
            return '';
        }

        // 현재 시간, 날짜 및 현재 진행 중인 수업 정보를 업데이트하는 함수
        function updateTimeAndClass() {
            const now = new Date();
            const dayOfWeek = ['일', '월', '화', '수', '목', '금', '토'][now.getDay()];
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const currentDate = `${now.getFullYear()}년 ${now.getMonth() + 1}월 ${now.getDate()}일 (${dayOfWeek})`;
            const currentTime = `${hours}:${minutes}:${seconds}`;

            document.getElementById('current-date').textContent = currentDate;
            document.getElementById('current-time').textContent = currentTime;

            const teacherNameP = document.getElementById('teacher-name-p');
            const locationP = document.getElementById('location-p');
            const specialMessageEl = document.getElementById('special-message');
            const classNameEl = document.getElementById('class-name');

            let currentClass = '수업 없음';
            let currentTeacher = '';
            let currentLocation = '';
            let currentMessage = '';
            let currentClassIndex = -1;
            let currentClassTimeRange = '';

            if (dayOfWeek !== '토' && dayOfWeek !== '일') {
                for (let i = 0; i < classTimes.length; i++) {
                    const classTime = classTimes[i];
                    const [startHours, startMinutes] = classTime.start.split(':').map(Number);
                    const [endHours, endMinutes] = classTime.end.split(':').map(Number);
                    const nowHours = now.getHours();
                    const nowMinutes = now.getMinutes();
                    const nowInMinutes = nowHours * 60 + nowMinutes;
                    const startInMinutes = startHours * 60 + startMinutes;
                    const endInMinutes = endHours * 60 + endMinutes;

                    if (nowInMinutes >= startInMinutes && nowInMinutes < endInMinutes) {
                        
                        // 특별 활동 시간 처리
                        if (classTime.special) {
                            currentClass = classTime.name;
                            currentTeacher = '';
                            currentLocation = '';
                            if (classTime.type === 'morning_message') {
                                const today = new Date();
                                const dayIndex = today.getDay();
                                const randomMessageIndex = (dayIndex % morningMessages.length);
                                currentMessage = morningMessages[randomMessageIndex];
                            } else if (classTime.type === 'morning_activity_message') {
                                if (dayOfWeek === '월' || dayOfWeek === '수' || dayOfWeek === '금') {
                                    currentMessage = '달리기 및 줄넘기 시간입니다.';
                                } else if (dayOfWeek === '화' || dayOfWeek === '목') {
                                    currentMessage = '영어 듣기 평가 시간입니다.';
                                }
                            } else {
                                currentMessage = classTime.message;
                            }
                        } else {
                            // 일반 수업 시간
                            const classInfo = timetableData[dayOfWeek] && timetableData[dayOfWeek][classTime.period - 1];
                            if (classInfo) {
                                currentClass = classInfo.name;
                                currentTeacher = classInfo.teacher;
                                currentLocation = classInfo.location;
                            }
                            currentClassIndex = classTime.period;
                            currentClassTimeRange = getClassTimeRange(currentClassIndex);
                        }
                        break;
                    }
                }
            } else {
                currentClass = '오늘은 주말입니다';
                currentMessage = '주말은 평일과 다른 시간표로 운영됩니다.';
            }

            classNameEl.textContent = currentClass;
            specialMessageEl.textContent = (currentClassTimeRange ? `(${currentClassTimeRange}) ` : '') + currentMessage;

            // 현재 수업 정보에 따라 선생님/장소 정보 표시/숨김
            if (currentTeacher || currentLocation) {
                document.getElementById('teacher-name').textContent = currentTeacher;
                document.getElementById('location').textContent = currentLocation;
                teacherNameP.style.display = 'block';
                locationP.style.display = 'block';
            } else {
                teacherNameP.style.display = 'none';
                locationP.style.display = 'none';
            }

            // 현재 교시 강조 표시
            const cells = document.querySelectorAll('#timetable td');
            cells.forEach(cell => cell.classList.remove('highlight'));
            if (currentClassIndex !== -1) {
                const colIndex = now.getDay() + 1;
                const cellToHighlight = document.querySelector(`#timetable tr:nth-child(${currentClassIndex}) td:nth-child(${colIndex})`);
                if (cellToHighlight) {
                    cellToHighlight.classList.add('highlight');
                }
            }
        }

        // 전체 시간표를 동적으로 생성하는 함수
        function generateTimetable() {
            const tableBody = document.querySelector('#timetable tbody');
            const days = ['월', '화', '수', '목', '금'];
            
            for (let i = 0; i < 7; i++) {
                const row = document.createElement('tr');
                const periodCell = document.createElement('td');
                periodCell.innerHTML = `<strong>${i + 1}교시</strong>`;
                row.appendChild(periodCell);

                days.forEach(day => {
                    const classInfo = timetableData[day] && timetableData[day][i];
                    const cell = document.createElement('td');
                    if (classInfo) {
                        const className = classInfo.name;
                        const teacherName = classInfo.teacher;
                        const location = classInfo.location;
                        cell.innerHTML = `<strong>${className}</strong><div>${teacherName || ''}</div><div>${location || ''}</div>`;
                    } else {
                        cell.textContent = '정보 없음';
                    }
                    row.appendChild(cell);
                });
                tableBody.appendChild(row);
            }
        }
        
        // 시간대별 배경 색상 설정
        function setTimeBasedBackground() {
            const now = new Date();
            const hour = now.getHours();
            const root = document.documentElement;

            if (hour >= 6 && hour < 12) {
                root.style.setProperty('--bg-start-color', '#fffde4');
                root.style.setProperty('--bg-end-color', '#c6ffdd');
            } else if (hour >= 12 && hour < 18) {
                root.style.setProperty('--bg-start-color', '#f7d794');
                root.style.setProperty('--bg-end-color', '#f8a5c2');
            } else {
                root.style.setProperty('--bg-start-color', '#091e3a');
                root.style.setProperty('--bg-end-color', '#2f5a89');
            }
        }

        // 페이지가 로드되면 실행
        window.onload = function () {
            generateTimetable();
            setTimeBasedBackground();
            updateTimeAndClass();
            
            // 코드 내부의 공지사항 변수를 화면에 표시
            document.getElementById('announcement-display').innerText = announcementText;
            
            setInterval(() => {
                updateTimeAndClass();
            }, 1000);   
        };
    </script>
</body>
</html>
